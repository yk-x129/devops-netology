# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендеров и областей применения."

## Задача 1
Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и 
виртуализации на основе ОС.

### Решение:
Полная виртуализация подразумевает что в качестве ОС на хостовой машине выступает сам гипервизор, он же является
"посредником" между аппаратной частью хоста и гостевой ОС. В паравиртуализации гипервизор является "посредником" между
гостевой ОС и хостовой. В контейнеризации (виртуализации на основе ОС) гипервизора как-такового не существует, ОС сама 
создает пространство для гостевых ОС при этом в гостевых ОС используется ядро хостовой.

### Вопрос на доработку:
Добрый день!  

Задание 1  
В чём разница при работе с ядром гостевой ОС для полной и паравиртуализации?  

С уважением,  
Алексей

### Доработка:
В паравиртуализации ядро гостевой операционной системы модифицируется для разделения доступа к ресурсам хоста, в полной
виртуализации ядро ОС гостевой ОС не модифицируется.

## Задача 2
Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:

* физические сервера,
* паравиртуализация,
* виртуализация уровня ОС.

Условия использования:

* Высоконагруженная база данных, чувствительная к отказу.
* Различные web-приложения.
* Windows системы для использования бухгалтерским отделом.
* Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

### Решение:
* Высоконагруженная база данных, чувствительная к отказу - физические сервера. Использование физических серверов 
позволит использовать все физические ресурсы машины, отказ отрабатывается через службы кластеризации базы данных.
* Различные web-приложения - виртуализация уровня ОС. docker + kvm позволит использовать интсрументы как ansible, vargant. В случае необходимости построить кластер можно использовать opennebula, openstack.
* Windows системы для использования бухгалтерским отделом - паравиртуализация. Hyper-V по соображениям лицензирования и удобства администрирования для людей обслуживающих windows. Если есть возможность заплатить то VMware esxi + vcenter, как более надёжное и удобное решение. 
* Системы, выполняющие высокопроизводительные расчеты на GPU - физические сервера. В случаях когда требуется
высокопроизводительные системы лучше использовать физические сервера. Если при этом нужна виртуализация то использовать Citrix Xen\Xen NG

## Задача 3
Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:
1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based 
инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного 
механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) 
инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

### Решение:
#### Сценарий 1:
Я бы использовал кластер opennebula + kvm + bacula	если стоит задача сделать "дёшево" или vmware esxi + vcenter + veean backup при наличии финансирования. 

#### Сценарий 2:
Наиболее производительное будет Xen PV но издержки администрования таких серверов по моему не стоят выйгрыша в производительности. Я бы использовал kvm.

#### Сценарий 3:
Для Windows инфраструктуры оптимальным вариантом будет Hyper-V позволят упростить лициензирование и предоставляет привычнцю среду для людей привыкших администрировать windows.
В задании нехватает данных, будет ли это один сервер или кластер серверов.

#### Сценарий 4:
В данном случае идеальным вариантом будет использование Docker + kvm. В Docker-hub содержится огромное количество готовых
образов для различных linux дистрибутивов, которые можно будет быстро развернуть. 

## Задача 4
Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления 
виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, 
то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

### Решение:
Недостатки гетерогенной среды заключается в том что возникнут проблемы с миграциями виртуальных машин, вероятно будет
недоступен функционал репликаций. Такие среды усложняют мониторинг, администрирование и управление ресурсами среды виртуализации. Единый подход к выбору платформы виртуализации позволяет значительно повысить надёжность всей системы.
Едиственный вариант использования гетерогенной среды -- необходимость использования сертифицированых сред (к примеру соблюдение гостайны или ФЗ152). 